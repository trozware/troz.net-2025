<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Learning Swift - Optionals</title>
    
    <link href="/styles/style.css" rel="stylesheet" >


    <link href="/styles/prism.css" rel="stylesheet" >



<link href="/pagefind/pagefind-ui.css" rel="stylesheet">
<script src="/pagefind/pagefind-ui.js"></script>
<style>
@media (prefers-color-scheme: dark) {
    :root {
    --pagefind-ui-primary: #eeeeee;
    --pagefind-ui-text: #eeeeee;
    --pagefind-ui-background: #152028;
    --pagefind-ui-border: #152028;
    --pagefind-ui-tag: #152028;
    }
}
</style>
    











  


<meta property="og:site_name" content="TrozWare" >
<meta property="og:title" content="Learning Swift - Optionals - TrozWare" >
<meta property="og:type" content="website" >
<meta property="og:url" content="https://troz.net/post/2016/learning-swift-optionals/" >
<meta name="keywords" content="Mac app development, Apple Mac, Xcode, Swift, SwiftUI, Apple macOS, books, articles, blog, apps, developer, author, Sarah Reichelt">




  <meta name="description" content="Crazy Mac lady. Mac author &amp; developer. Lover of Apple computers and devices. Swift &amp; SwiftUI enthusiast. Unofficial Mac app dev evangelist" >
  <meta property="og:description" content="Crazy Mac lady. Mac author &amp; developer. Lover of Apple computers and devices. Swift &amp; SwiftUI enthusiast. Unofficial Mac app dev evangelist" >



<link rel="alternate" type="application/rss+xml" href="/index.xml" title="TrozWare">
<link rel="alternate" type="application/atom+xml" href="/atom.xml" title="TrozWare">
<link rel="alternate" type="application/json" href="/feed.json" title="TrozWare">


<link rel="icon" type="image/png" href="/images/favicon.png">

    <link rel="icon" href="/favicon.ico" sizes="32x32">
<link rel="icon" href="/icon.svg" type="image/svg+xml">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
</head>

<body>
    <header>
  <nav class="container">
    <div class="nav-brand">
      <a href="/" class="site-title">TrozWare</a>
      <button class="menu-toggle" aria-label="Toggle menu" aria-expanded="false">
        <span class="hamburger"></span>
      </button>
    </div>

    <ul class="nav-links">
      
        <li>
          <a href="/" class="nav-link">Home</a>
        </li>
      
        <li>
          <a href="/books/" class="nav-link">Books</a>
        </li>
      
        <li>
          <a href="/apps/" class="nav-link">Apps</a>
        </li>
      
        <li>
          <a href="/archives/" class="nav-link">Archives</a>
        </li>
      
        <li>
          <a href="/tags/" class="nav-link">Tags</a>
        </li>
      
        <li>
          <a href="/contact/" class="nav-link">Contact</a>
        </li>
      

      <li>
        <button           class="theme-toggle"
          type="button"
          title="Toggle theme"
          aria-label="Toggle theme"
          onclick="toggleTheme()"
        >
          <svg             xmlns="http://www.w3.org/2000/svg"
            aria-hidden="true"
            width="1em"
            height="1em"
            class="theme-toggle__dark-side"
            fill="currentColor"
            viewBox="0 0 32 32"
          >
            <path d="M16 .5C7.4.5.5 7.4.5 16S7.4 31.5 16 31.5 31.5 24.6 31.5 16 24.6.5 16 .5zm0 28.1V3.4C23 3.4 28.6 9 28.6 16S23 28.6 16 28.6z" ></path>
          </svg>
        </button>
      </li>
    </ul>
  </nav>
</header>

    
	<main>
        
    <section class="post">
        <h1 data-pagefind-meta="title">Learning Swift - Optionals</h1>

        <p>
            12th March 2016 • 967 words • 6 minutes  reading time.
        </p>

        <div class="tag-list">
            
                <a href="/tags/#learning-swift" class="tag-button">#Learning Swift</a>
            
                <a href="/tags/#optionals" class="tag-button">#Optionals</a>
            
                <a href="/tags/#swift" class="tag-button">#Swift</a>
            
        </div>

        <article data-pagefind-body>
            
<p>Today I plan to discuss optionals since they were a feature of Swift that I
found difficult to grasp at first.</p>
<h2>What is an optional in Swift?</h2>
<p>An optional is a variable of a specified type that can also be nil.</p>
<h2>Why does this matter?</h2>
<p>In Objective-C, any object type could be nil. If you declared a variable like
this:</p>
<pre class="language-objectivec"><code class="language-objectivec">NSString <span class="token operator">*</span>myString<span class="token punctuation">;</span></code></pre>
<p>then <code>myString</code> was set to nil by default.</p>
<p>But this could cause issues, especially as Objective-C does not complain if you
send a message to nil. This could lead to bugs that were very difficult to track
down.</p>
<p>The other big use for nil is when returning from a function which has found no
appropriate data to return. The classic example is when looking for the index of
an element in an array. What should be returned if the element is not found in
the array?</p>
<p>Some languages return -1, Objective-C uses <code>NSNotFound</code>, but you have to know
what each language is going to do. The more logical answer is nil. However if
your function is expected to return an integer, then it cannot return nil
because nil is not an integer.</p>
<p>This is where optionals come in: if the function is expected to return an
optional integer, it can return with an integer with the index of the matching
element, or it can return nil if the element was not found. This is much clearer
and less prone to error.</p>
<hr>
<h2>How does Swift handle optionals?</h2>
<p>One of the first things that struck me about Swift was how clean the code
looked, without so many non-alphanumeric characters scattered around. Gone were
all the:</p>
<pre class="language-swift"><code class="language-swift"><span class="token operator">*</span> <span class="token punctuation">;</span> <span class="token punctuation">[</span> <span class="token punctuation">]</span></code></pre>
<p>But instead, Swift code sprouted:</p>
<pre class="language-swift"><code class="language-swift"><span class="token operator">!</span> <span class="token operator">?</span></code></pre>
<p>What were these?</p>
<p><strong>The key to understanding optionals is to realise that when you declare an
optional variable of a certain type, you are actually declaring a box that can
hold a variable of that type or can hold nil.</strong></p>
<p>Once you grasp that concept, it all becomes much more obvious.</p>
<pre class="language-swift"><code class="language-swift"><span class="token keyword">var</span> optionalInteger<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token operator">?</span></code></pre>
<p>The ? indicates that this is an optional variable. It does not have to be
initialised as it is already set to nil which is valid for an optional variable.
Without the ? this would require initialisation as it would not be valid for it
to be nil.</p>
<hr>
<h2>Setting an optional</h2>
<p>Setting the value of an optional variable is just the same as any other
variable:</p>
<pre class="language-swift"><code class="language-swift">optionalInteger <span class="token operator">=</span> <span class="token number">3</span>
optionalInteger <span class="token operator">=</span> <span class="token number">42</span></code></pre>
<hr>
<h2>Getting an optional</h2>
<p>The difference arises when you need to get the data out of the optional variable
in order to use it. This process is called un-wrapping and it means to get the
variable value out of the 'box' it is stored it.</p>
<h3>The most obvious way is to use !</h3>
<pre class="language-swift"><code class="language-swift"><span class="token keyword">let</span> newInteger <span class="token operator">=</span> optionalInteger<span class="token operator">!</span></code></pre>
<p><strong>DO NOT DO THIS!</strong></p>
<p>This is called forced-unwrapping and assumes that the optional variable is not
nil. If the optional is nil, this will crash. In Xcode, when you connect
interface elements from your storyboard to a Swift file, Xcode will use ! like
this:</p>
<pre class="language-swift"><code class="language-swift"><span class="token attribute atrule">@IBOutlet</span> <span class="token keyword">weak</span> <span class="token keyword">var</span> startButton<span class="token punctuation">:</span> <span class="token class-name">UIButton</span><span class="token operator">!</span></code></pre>
<p>I have to assume Xcode knows what it is doing and the button will be available
when needed, but you should not use ! - it is un-safe. By using it, you are
vowing to the compiler that when it gets to that point, the optional value will
not be nil. There are much better and safer ways of doing that.</p>
<hr>
<h3>Use 'if let'</h3>
<pre class="language-swift"><code class="language-swift"><span class="token keyword">func</span> <span class="token function-definition function">doubleNumber</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> optionalInteger<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token operator">?</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token class-name">Int</span><span class="token operator">?</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token keyword">let</span> integerValue <span class="token operator">=</span> optionalInteger <span class="token punctuation">{</span>
        <span class="token comment">// integerValue is not an optional</span>
        <span class="token comment">// and is guaranteed to contain an Int</span>
        <span class="token keyword">return</span> integerValue <span class="token operator">*</span> <span class="token number">2</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// no integer found in the optional,</span>
    <span class="token comment">// so return nil to indicate failure</span>
    <span class="token keyword">return</span> <span class="token nil constant">nil</span>
<span class="token punctuation">}</span></code></pre>
<hr>
<h3>Use guard</h3>
<pre class="language-swift"><code class="language-swift"><span class="token keyword">func</span> <span class="token function-definition function">doubleNumber</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> optionalInteger<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token operator">?</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token class-name">Int</span><span class="token operator">?</span> <span class="token punctuation">{</span>
    <span class="token keyword">guard</span> <span class="token keyword">let</span> integerValue <span class="token operator">=</span> optionalInteger <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">// get out quickly,</span>
        <span class="token comment">// returning nil to indicate failure</span>
        <span class="token keyword">return</span> <span class="token nil constant">nil</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// integerValue is not an optional</span>
    <span class="token comment">// and is guaranteed to contain an Int</span>
    <span class="token keyword">return</span> integerValue <span class="token operator">*</span> <span class="token number">2</span>
<span class="token punctuation">}</span></code></pre>
<p>These two alternatives (<code>if let</code> &amp; <code>guard</code>) do the same job but in opposite
ways. In both cases, they perform a conditional un-wrapping that may or may not
give a valid result. <code>if let</code> checks if it is OK to proceed. <code>guard</code> checks to
see if it is NOT OK to proceed. Which you use is really a matter of personal
preference and working out what is more logical in each case.</p>
<p>The <code>guard</code> statement is really good for checking data early in a process and
making a quick exit it something is wrong. The <code>if let</code> construct encloses your
success code inside a block and can sometimes leave the failure code a long way
from the check which can make it less obvious. The other potential issue with
<code>if let</code> is the &quot;pyramid of doom&quot; common in early Swift code as demonstrated in
this rather contrived example:</p>
<pre class="language-swift"><code class="language-swift"><span class="token keyword">func</span> <span class="token function-definition function">isValidAddressBookEntry</span><span class="token punctuation">(</span>firstName<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token operator">?</span><span class="token punctuation">,</span>
                             lastName<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token operator">?</span><span class="token punctuation">,</span>
                             emailAddress<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token operator">?</span><span class="token punctuation">,</span>
                             phoneNumber<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token operator">?</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token class-name">Bool</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token keyword">let</span> validFirstName <span class="token operator">=</span> firstName <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token keyword">let</span> validLastName <span class="token operator">=</span> lastName <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token keyword">let</span> validEmail <span class="token operator">=</span> emailAddress <span class="token punctuation">{</span>
                    <span class="token keyword">if</span> <span class="token keyword">let</span> validPhone <span class="token operator">=</span> phoneNumber <span class="token punctuation">{</span>
                        <span class="token keyword">return</span> <span class="token boolean">true</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span></code></pre>
<p>Thankfully, Swift now allows us to chain both <code>if let</code> and <code>guard</code> statements.
Here is the previous example re-factored to use <code>if let</code>:</p>
<pre class="language-swift"><code class="language-swift"><span class="token keyword">func</span> <span class="token function-definition function">isValidAddressBookEntrySwift2</span><span class="token punctuation">(</span>firstName<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token operator">?</span><span class="token punctuation">,</span>
                                   lastName<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token operator">?</span><span class="token punctuation">,</span>
                                   emailAddress<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token operator">?</span><span class="token punctuation">,</span>
                                   phoneNumber<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token operator">?</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token class-name">Bool</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token keyword">let</span> validFirstName <span class="token operator">=</span> firstName<span class="token punctuation">,</span>
          <span class="token keyword">let</span> validLastName <span class="token operator">=</span> lastName<span class="token punctuation">,</span>
          <span class="token keyword">let</span> validEmail <span class="token operator">=</span> emailAddress<span class="token punctuation">,</span>
          <span class="token keyword">let</span> validPhone <span class="token operator">=</span> phoneNumber <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span></code></pre>
<p>And here is the same function but using <code>guard</code> which allows the inputs to be checked immediately and the function exited if the u=inputs are not valid. For a short function like this, the change is not really significant, but if the function does a lot of processing of the input data, checking first and getting out as soon as possible is more efficient.</p>
<pre class="language-swift"><code class="language-swift"><span class="token keyword">func</span> <span class="token function-definition function">isValidAddressBookEntryUsingGuard</span><span class="token punctuation">(</span>firstName<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token operator">?</span><span class="token punctuation">,</span>
                                       lastName<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token operator">?</span><span class="token punctuation">,</span>
                                       emailAddress<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token operator">?</span><span class="token punctuation">,</span>
                                       phoneNumber<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token operator">?</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token class-name">Bool</span> <span class="token punctuation">{</span>
    <span class="token keyword">guard</span>
        <span class="token keyword">let</span> validFirstName <span class="token operator">=</span> firstName<span class="token punctuation">,</span>
        <span class="token keyword">let</span> validLastName <span class="token operator">=</span> lastName<span class="token punctuation">,</span>
        <span class="token keyword">let</span> validEmail <span class="token operator">=</span> emailAddress<span class="token punctuation">,</span>
        <span class="token keyword">let</span> validPhone <span class="token operator">=</span> phoneNumber <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span></code></pre>
<hr>
<h3>Use optional chaining</h3>
<p>The final way to deal with optionals safely is to use optional chaining:</p>
<pre class="language-swift"><code class="language-swift"><span class="token keyword">struct</span> <span class="token class-name">SocialMediaAccounts</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> facebook<span class="token punctuation">:</span> <span class="token class-name">Person</span><span class="token operator">?</span>
    <span class="token keyword">var</span> twitter<span class="token punctuation">:</span> <span class="token class-name">Person</span><span class="token operator">?</span>
<span class="token punctuation">}</span>

<span class="token keyword">struct</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> firstName<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token operator">?</span>
    <span class="token keyword">var</span> lastName<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token operator">?</span>
    <span class="token keyword">var</span> handle<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token operator">?</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> socialMedia<span class="token punctuation">:</span> <span class="token class-name">SocialMediaAccounts</span><span class="token operator">?</span>
socialMedia <span class="token operator">=</span> <span class="token class-name">SocialMediaAccounts</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> twitterAccount <span class="token operator">=</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

socialMedia<span class="token operator">?</span><span class="token punctuation">.</span>twitter <span class="token operator">=</span> twitterAccount
<span class="token keyword">let</span> twitterHandle <span class="token operator">=</span> socialMedia<span class="token operator">?</span><span class="token punctuation">.</span>twitter<span class="token operator">?</span><span class="token punctuation">.</span>handle</code></pre>
<p>In this example, we have defined a <code>SocialMediaAccounts</code> struct that holds
optional <code>Person</code> structs for the various social media outlets. The
<code>socialMedia</code> variable is defined as an optional and then created. A
<code>twitterAccount</code> variable of type <code>Person</code> is also created but contains no data
at the moment.</p>
<p>When assigning the <code>twitterAccount</code> to the <code>socialMedia.twitter</code> property, a ?
is inserted which checks to see that <code>socialMedia</code> is not nil. If it is nil,
then execution of that line stops at the ? and nothing bad will happen.</p>
<p>In the same way, when trying to read back the twitter handle, we chained
together 2 optionals with ?'s. If either <code>socialMedia</code> or <code>socialMedia.twitter</code>
is nil, that line will not complete. Again this is perfectly safe and the app
will not crash.</p>
<hr>
<p>All the examples in this article are available in a <a href="https://github.com/trozware/optionals" rel="noreferrer nofollow noopener external" target="_blank">Swift playground</a> which
has been updated to Swift 4 syntax.</p>

        </article>
    </section>

    </main>
    <footer>
        <div class="footer-content">
  <nav>
    <ul class="footer-links">
      
        <li>
          <a href="mailto:info@troz.net">
            <img src="/images/links/envelope.svg" alt="Email" title="Email" height="30px" >
          </a>
        </li>
      
        <li>
          <a href="https://mastodon.social/@troz" rel="noreferrer nofollow noopener external" target="_blank">
            <img src="/images/links/mastodon.png" alt="Mastodon" title="Mastodon" height="30px" >
          </a>
        </li>
      
        <li>
          <a href="https://linktr.ee/trozware" rel="noreferrer nofollow noopener external" target="_blank">
            <img src="/images/links/tree.svg" alt="Linktree" title="Linktree" height="30px" >
          </a>
        </li>
      
        <li>
          <a href="https://github.com/trozware" rel="noreferrer nofollow noopener external" target="_blank">
            <img src="/images/links/github.svg" alt="GitHub" title="GitHub" height="30px" >
          </a>
        </li>
      
        <li>
          <a href="https://stackoverflow.com/users/1082632" rel="noreferrer nofollow noopener external" target="_blank">
            <img src="/images/links/stack-overflow.svg" alt="Stack Overflow" title="Stack Overflow" height="30px" >
          </a>
        </li>
      
        <li>
          <a href="https://dev.to/trozware" rel="noreferrer nofollow noopener external" target="_blank">
            <img src="/images/links/dev-badge.svg" alt="Dev To" title="Dev To" height="30px" >
          </a>
        </li>
      
        <li>
          <a href="/index.xml">
            <img src="/images/links/rss.svg" alt="RSS Feed" title="RSS Feed" height="30px" >
          </a>
        </li>
      
        <li>
          <a href="/atom.xml">
            <img src="/images/links/atom.svg" alt="Atom Feed" title="Atom Feed" height="30px" >
          </a>
        </li>
      
        <li>
          <a href="/feed.json">
            <img src="/images/links/json.png" alt="JSON Feed" title="JSON Feed" height="30px" >
          </a>
        </li>
      
        <li>
          <a href="https://ko-fi.com/trozware" rel="noreferrer nofollow noopener external" target="_blank">
            <img src="/images/links/kofi1.png.webp" alt="Buy Me a Coffee" title="Buy Me a Coffee" height="30px" >
          </a>
        </li>
      
    </ul>
  </nav>
</div>

        <div class="copyright">
            <p>Copyright &copy; 2025 Sarah Reichelt, TrozWare</p>
        </div>
    </footer>

    <script>
        window.addEventListener('DOMContentLoaded', (event) => {
            let searchElement = document.getElementById('search');
            if (searchElement) {
                new PagefindUI({ element: searchElement, showSubResults: true });
            }
        });
    </script>
    <script src="/js/theme_switcher.js"></script>
    <script src="/js/clipboard.js"></script>
    <script src="/js/menu.js"></script>
</body>
</html>
