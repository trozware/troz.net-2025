<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Functional Programming in Swift</title>
    
    <link href="/styles/style.css" rel="stylesheet" >


    <link href="/styles/prism.css" rel="stylesheet" >



<link href="/pagefind/pagefind-ui.css" rel="stylesheet">
<script src="/pagefind/pagefind-ui.js"></script>
<style>
@media (prefers-color-scheme: dark) {
    :root {
    --pagefind-ui-primary: #eeeeee;
    --pagefind-ui-text: #eeeeee;
    --pagefind-ui-background: #152028;
    --pagefind-ui-border: #152028;
    --pagefind-ui-tag: #152028;
    }
}
</style>
    











  


<meta property="og:site_name" content="TrozWare" >
<meta property="og:title" content="Functional Programming in Swift - TrozWare" >
<meta property="og:type" content="website" >
<meta property="og:url" content="https://troz.net/post/2018/functional-programming/" >
<meta name="keywords" content="Mac app development, Apple Mac, Xcode, Swift, SwiftUI, Apple macOS, books, articles, blog, apps, developer, author, Sarah Reichelt">




  <meta name="description" content="Crazy Mac lady. Mac author &amp; developer. Lover of Apple computers and devices. Swift &amp; SwiftUI enthusiast. Unofficial Mac app dev evangelist" >
  <meta property="og:description" content="Crazy Mac lady. Mac author &amp; developer. Lover of Apple computers and devices. Swift &amp; SwiftUI enthusiast. Unofficial Mac app dev evangelist" >



<link rel="alternate" type="application/rss+xml" href="/index.xml" title="TrozWare">
<link rel="alternate" type="application/atom+xml" href="/atom.xml" title="TrozWare">
<link rel="alternate" type="application/json" href="/feed.json" title="TrozWare">


<link rel="icon" type="image/png" href="/images/favicon.png">

    <link rel="icon" href="/favicon.ico" sizes="32x32">
<link rel="icon" href="/icon.svg" type="image/svg+xml">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
</head>

<body>
    <header>
  <nav class="container">
    <div class="nav-brand">
      <a href="/" class="site-title">TrozWare</a>
      <button class="menu-toggle" aria-label="Toggle menu" aria-expanded="false">
        <span class="hamburger"></span>
      </button>
    </div>

    <ul class="nav-links">
      
        <li>
          <a href="/" class="nav-link">Home</a>
        </li>
      
        <li>
          <a href="/books/" class="nav-link">Books</a>
        </li>
      
        <li>
          <a href="/apps/" class="nav-link">Apps</a>
        </li>
      
        <li>
          <a href="/archives/" class="nav-link">Archives</a>
        </li>
      
        <li>
          <a href="/tags/" class="nav-link">Tags</a>
        </li>
      
        <li>
          <a href="/contact/" class="nav-link">Contact</a>
        </li>
      

      <li>
        <button           class="theme-toggle"
          type="button"
          title="Toggle theme"
          aria-label="Toggle theme"
          onclick="toggleTheme()"
        >
          <svg             xmlns="http://www.w3.org/2000/svg"
            aria-hidden="true"
            width="1em"
            height="1em"
            class="theme-toggle__dark-side"
            fill="currentColor"
            viewBox="0 0 32 32"
          >
            <path d="M16 .5C7.4.5.5 7.4.5 16S7.4 31.5 16 31.5 31.5 24.6 31.5 16 24.6.5 16 .5zm0 28.1V3.4C23 3.4 28.6 9 28.6 16S23 28.6 16 28.6z" ></path>
          </svg>
        </button>
      </li>
    </ul>
  </nav>
</header>

    
	<main>
        
    <section class="post">
        <h1 data-pagefind-meta="title">Functional Programming in Swift</h1>

        <p>
            14th June 2018 • 1,848 words • 12 minutes  reading time.
        </p>

        <div class="tag-list">
            
                <a href="/tags/#functional" class="tag-button">#Functional</a>
            
                <a href="/tags/#learning-swift" class="tag-button">#Learning Swift</a>
            
                <a href="/tags/#swift" class="tag-button">#Swift</a>
            
        </div>

        <article data-pagefind-body>
            <p>What is Functional Programming and how can we use it in Swift?</p>
<p>Search online for any definition of functional programming and you will find many different definitions, few of which are practically helpful. I have no claim to be an expert, but as a Swift enthusiast, this is what I have distilled out of the morass.</p>

<h2>What is Functional Programming?</h2>
<p>Without providing a concrete definition, here are what I see as the 3 main goals of functional programming:</p>
<ul>
<li>use pure functions where possible</li>
<li>avoid mutability where possible</li>
<li>use functions as the basic building blocks</li>
</ul>
<p>So let's go through those one by one and see how they fit into the Swift language.</p>
<h2>Functional Programming in Swift</h2>
<p>You can <a href="https://github.com/trozware/functional-programming" rel="noreferrer nofollow noopener external" target="_blank">download a playground containing all these examples from GitHub</a>.</p>
<h3>Pure functions</h3>
<p>A function is considered pure if it will always produce the same result for the same input, regardless of where it is and what calls it.</p>
<p>Imagine you are writing a role-playing game and for a given fight, you need to be able to calculate the damage per second caused by a character.</p>
<pre class="language-swift"><code class="language-swift"><span class="token keyword">class</span> <span class="token class-name">DamageDealer</span> <span class="token punctuation">{</span>

    <span class="token keyword">var</span> damageDone<span class="token punctuation">:</span> <span class="token class-name">Int</span> <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token keyword">var</span> timeTaken<span class="token punctuation">:</span> <span class="token class-name">TimeInterval</span> <span class="token operator">=</span> <span class="token number">0</span>

    <span class="token keyword">func</span> <span class="token function-definition function">damagePerSecond</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token class-name">Double</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> timeTaken <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token number">0</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">let</span> dps <span class="token operator">=</span> <span class="token class-name">Double</span><span class="token punctuation">(</span>damageDone<span class="token punctuation">)</span> <span class="token operator">/</span> timeTaken
        <span class="token keyword">if</span> dps <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token number">0</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> dps
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

<span class="token keyword">let</span> mage <span class="token operator">=</span> <span class="token class-name">DamageDealer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
mage<span class="token punctuation">.</span>damageDone <span class="token operator">=</span> <span class="token number">32</span>
mage<span class="token punctuation">.</span>timeTaken <span class="token operator">=</span> <span class="token number">10</span>

mage<span class="token punctuation">.</span><span class="token function">damagePerSecond</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre>
<p>The <code>damagePerSecond</code> function takes no parameters but uses the properties of its containing object. This works in this class, but there are 3 big problems:</p>
<ol>
<li>The function is not transportable - you cannot copy it into another class as it is totally dependent on the structure of the properties in the containing class.</li>
<li>When calling the function, it is not clear what data it is going to use.</li>
<li>This function is difficult to test as calling the function with the same parameters (none) will produce different results depending on the setup.</li>
</ol>
<p>So for a version that uses a pure function, we could replace <code>damagePerSecond()</code> with this:</p>
<pre class="language-swift"><code class="language-swift"><span class="token keyword">func</span> <span class="token function-definition function">damagePerSecondPure</span><span class="token punctuation">(</span>damage<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">,</span> time<span class="token punctuation">:</span> <span class="token class-name">TimeInterval</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token class-name">Double</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> time <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token number">0</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">let</span> dps <span class="token operator">=</span> <span class="token class-name">Double</span><span class="token punctuation">(</span>damage<span class="token punctuation">)</span> <span class="token operator">/</span> time
    <span class="token keyword">if</span> dps <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token number">0</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> dps
<span class="token punctuation">}</span>

mage<span class="token punctuation">.</span><span class="token function">damagePerSecondPure</span><span class="token punctuation">(</span>damage<span class="token punctuation">:</span> mage<span class="token punctuation">.</span>damageDone<span class="token punctuation">,</span> time<span class="token punctuation">:</span> mage<span class="token punctuation">.</span>timeTaken<span class="token punctuation">)</span></code></pre>
<p>Calling the function is now more verbose, but reading the call gives you much more information about what is going to happen. Testing is easy, and the function is completely self-contained so can be copied into any class or struct.</p>
<h3>Avoid mutability</h3>
<p>This one has become the poster child of Swift Functional Programming as Swift provides some very convenient ways to avoid mutability.</p>
<p>The first is <code>let</code> versus <code>var</code>. My rule is always to start defining any variable/constant with <code>let</code> and only changing to <code>var</code> if the compiler raises an error. In the current versions of Xcode, it will give a warning if you use <code>var</code> unnecessarily which is great, but I still stick to using <code>let</code> first.</p>
<p>The most powerful way Swift lets us avoid mutability with Functional Programming is with <code>map</code>, <code>filter</code> and <code>reduce</code>.</p>
<h4>Filter</h4>
<p>Consider this function that checks possible player names:</p>
<pre class="language-swift"><code class="language-swift"><span class="token keyword">func</span> <span class="token function-definition function">checkPlayerNames</span><span class="token punctuation">(</span>names<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token punctuation">[</span><span class="token class-name">String</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> validNames<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">String</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

    <span class="token keyword">for</span> name <span class="token keyword">in</span> names <span class="token punctuation">{</span>
        <span class="token keyword">if</span> name<span class="token punctuation">.</span>count <span class="token operator">></span> <span class="token number">3</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>name<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">" "</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            validNames<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> validNames
<span class="token punctuation">}</span>

<span class="token keyword">let</span> allNames <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token string-literal"><span class="token string">"Woody"</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"Rex"</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"Slinky"</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"Buzz Lightyear"</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"Hamm"</span></span> <span class="token punctuation">]</span>
<span class="token keyword">let</span> checkedNames <span class="token operator">=</span> <span class="token function">checkPlayerNames</span><span class="token punctuation">(</span>names<span class="token punctuation">:</span> allNames<span class="token punctuation">)</span></code></pre>
<p>Only names with more than 3 characters and no spaces are considered valid. So this function creates an empty array and then loops through each member of the supplied array and appends any valid names to the new array before returning it.</p>
<p>This function is a pure function and it works as expected. But the <code>validNames</code> array is mutable and there is no need for it to be.</p>
<p>Converting this to avoid mutability, we get:</p>
<pre class="language-swift"><code class="language-swift"><span class="token keyword">func</span> <span class="token function-definition function">checkPlayerNamesUsingFilter</span><span class="token punctuation">(</span>names<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token punctuation">[</span><span class="token class-name">String</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> validNames <span class="token operator">=</span> names<span class="token punctuation">.</span>filter <span class="token punctuation">{</span> name <span class="token keyword">in</span>
        name<span class="token punctuation">.</span>count <span class="token operator">></span> <span class="token number">3</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>name<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">" "</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> validNames
<span class="token punctuation">}</span></code></pre>
<p>Inside the <code>filter</code> closure delimited by the curly braces after the word <code>filter</code>, (more about closures below), the element in the array being evaluated is stored in the <code>name</code> constant. The checks are done and this implicitly returns a <code>Bool</code> - true if the checks pass, false if they do not. If the closure returns true, the name is valid and will be part of the validNames array.</p>
<p>And if you really want to be concise:</p>
<pre class="language-swift"><code class="language-swift"><span class="token keyword">func</span> <span class="token function-definition function">checkPlayerNamesUsingFilterShort</span><span class="token punctuation">(</span>names<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token punctuation">[</span><span class="token class-name">String</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> names<span class="token punctuation">.</span>filter <span class="token punctuation">{</span> <span class="token short-argument">$0</span><span class="token punctuation">.</span>count <span class="token operator">></span> <span class="token number">3</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token short-argument">$0</span><span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">" "</span></span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p>I recommend the first method even if it is a bit more verbose. Storing the result in a constant before returning it makes debugging much easier. Using $0 instead of using a named parameter is convenient, but I prefer not to do this unless the closure is very simple.</p>
<h4>Map</h4>
<p><code>filter</code> takes an array of objects and returns a sub-array containing every element which returned true for the checks inside the filter body.</p>
<p><code>map</code> changes the elements in an array and can return an array of the same type or an array of different types.</p>
<p>Here is a function to square every integer in an array in the old style, using a mutable array to accumulate the result:</p>
<pre class="language-swift"><code class="language-swift"><span class="token keyword">func</span> <span class="token function-definition function">squareNumbers</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> numbers<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Int</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token punctuation">[</span><span class="token class-name">Int</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> squares<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Int</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

    <span class="token keyword">for</span> number <span class="token keyword">in</span> numbers <span class="token punctuation">{</span>
        squares<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>number <span class="token operator">*</span> number<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> squares
<span class="token punctuation">}</span>

<span class="token keyword">let</span> numbers <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span> <span class="token punctuation">]</span>
<span class="token function">squareNumbers</span><span class="token punctuation">(</span>numbers<span class="token punctuation">)</span></code></pre>
<p>And doing the same thing using <code>map</code>:</p>
<pre class="language-swift"><code class="language-swift"><span class="token keyword">func</span> <span class="token function-definition function">squareNumbersUsingMap</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> numbers<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Int</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token punctuation">[</span><span class="token class-name">Int</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> squares <span class="token operator">=</span> numbers<span class="token punctuation">.</span>map <span class="token punctuation">{</span> <span class="token short-argument">$0</span> <span class="token operator">*</span> <span class="token short-argument">$0</span> <span class="token punctuation">}</span>
    <span class="token keyword">return</span> squares
<span class="token punctuation">}</span></code></pre>
<p>In this case, the type of the data did not change: integers went in, integers came out.
But <code>map</code> can change the type as well.</p>
<pre class="language-swift"><code class="language-swift"><span class="token keyword">func</span> <span class="token function-definition function">squareRoots</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> numbers<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Int</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token punctuation">[</span><span class="token class-name">Double</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> roots <span class="token operator">=</span> numbers<span class="token punctuation">.</span>map <span class="token punctuation">{</span> number <span class="token keyword">in</span>
        <span class="token function">sqrt</span><span class="token punctuation">(</span><span class="token class-name">Double</span><span class="token punctuation">(</span>number<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> roots
<span class="token punctuation">}</span>

<span class="token function">squareRoots</span><span class="token punctuation">(</span>numbers<span class="token punctuation">)</span></code></pre>
<p>And there is a final twist to <code>map</code> that used to be called <code>flatMap</code> but is now called <code>compactMap</code> and that allows us to get rid of optionals as we map through an array.</p>
<pre class="language-swift"><code class="language-swift"><span class="token keyword">func</span> <span class="token function-definition function">convertStringsToInts</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> strings<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token punctuation">[</span><span class="token class-name">Int</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> ints <span class="token operator">=</span> strings<span class="token punctuation">.</span>compactMap <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token class-name">Int</span><span class="token punctuation">(</span><span class="token short-argument">$0</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
    <span class="token keyword">return</span> ints
<span class="token punctuation">}</span>

<span class="token keyword">let</span> strings <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token string-literal"><span class="token string">"1"</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"two"</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">""</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"0.34"</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"65"</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"-93"</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"4e8"</span></span> <span class="token punctuation">]</span>
<span class="token function">convertStringsToInts</span><span class="token punctuation">(</span>strings<span class="token punctuation">)</span></code></pre>
<p>The conversion of <code>String</code> to <code>Int</code> may fail and so returns an optional. If this function had used <code>map</code> instead of <code>compactMap</code>, the result would have been an array of optional Ints: <code>[Int?]</code>. By using <code>compactMap</code>, every <code>nil</code> value was dropped and only valid integers are included.</p>
<h4>Reduce</h4>
<p>The final tool in the immutability toolbox is <code>reduce</code> and this is one that took me a while to wrap my head around.</p>
<p>Imagine that you wanted to add up all the integers in an array. Here is a way to do it using a mutable variable and a loop:</p>
<pre class="language-swift"><code class="language-swift"><span class="token keyword">func</span> <span class="token function-definition function">sumNumbers</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> numbers<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Int</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token class-name">Int</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> total <span class="token operator">=</span> <span class="token number">0</span>

    <span class="token keyword">for</span> num <span class="token keyword">in</span> numbers <span class="token punctuation">{</span>
        total <span class="token operator">+=</span> num
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> total
<span class="token punctuation">}</span>

<span class="token keyword">let</span> numbers <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span> <span class="token punctuation">]</span>
<span class="token function">sumNumbers</span><span class="token punctuation">(</span>numbers<span class="token punctuation">)</span></code></pre>
<p>I can't use <code>filter</code> or <code>map</code> here because I want to end up with a single value after applying some logic to every item in the array. So here is where I use <code>reduce</code>.</p>
<pre class="language-swift"><code class="language-swift"><span class="token keyword">func</span> <span class="token function-definition function">sumNumbersUsingReduce</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> numbers<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Int</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token class-name">Int</span> <span class="token punctuation">{</span>

    <span class="token keyword">let</span> total <span class="token operator">=</span> numbers<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">(</span>cumulativeTotal<span class="token punctuation">,</span> nextValue<span class="token punctuation">)</span> <span class="token keyword">in</span>
        <span class="token keyword">return</span> cumulativeTotal <span class="token operator">+</span> nextValue
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> total
<span class="token punctuation">}</span>

<span class="token function">sumNumbersUsingReduce</span><span class="token punctuation">(</span>numbers<span class="token punctuation">)</span></code></pre>
<p>The <code>reduce</code> function takes 2 parameters. The first is the starting value - in this case it is zero. The second paramter is a function (I am using a closure) this in turn takes 2 parameters and here is where it gets complicated. Inside the closure function, the 2 parameters are the current result and the next value from the loop. And what you return from this closure is going to be the new cumulative value which will either be fed back into the loop, or returned as the final result. The first time through the loop, the first parameter will be the initial value as set in the reduce function call.</p>
<p>To see how this happens, here is a version sprinkled with <code>print</code> statements showing what happens each time through the loop:</p>
<pre class="language-swift"><code class="language-swift"><span class="token keyword">func</span> <span class="token function-definition function">sumNumbersReduceDebug</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> numbers<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Int</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token class-name">Int</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> total <span class="token operator">=</span> numbers<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">(</span>cumulativeTotal<span class="token punctuation">,</span> nextValue<span class="token punctuation">)</span> <span class="token keyword">in</span>
        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"cumulativeTotal = </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">cumulativeTotal</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span>
        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"nextValue = </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">nextValue</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span>
        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"about to return </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">cumulativeTotal</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"> + </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">nextValue</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"> = </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">cumulativeTotal <span class="token operator">+</span> nextValue</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"> which will become the next culmulative or the final value"</span></span><span class="token punctuation">)</span>

        <span class="token keyword">return</span> cumulativeTotal <span class="token operator">+</span> nextValue
    <span class="token punctuation">}</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"final result = </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">total</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> total
<span class="token punctuation">}</span>

<span class="token keyword">let</span> shortNumbers <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">8</span> <span class="token punctuation">]</span>

<span class="token function">sumNumbersReduceDebug</span><span class="token punctuation">(</span>shortNumbers<span class="token punctuation">)</span></code></pre>
<p>This produces a log showing:</p>
<pre class="language-text"><code class="language-text">cumulativeTotal = 0
nextValue = 5
about to return 0 + 5 = 5 which will become the next culmulative or the final value
cumulativeTotal = 5
nextValue = 3
about to return 5 + 3 = 8 which will become the next culmulative or the final value
cumulativeTotal = 8
nextValue = 8
about to return 8 + 8 = 16 which will become the next culmulative or the final value
final result = 16</code></pre>
<h3>Using functions as building blocks</h3>
<p>This one is more a matter of style than of any particular programming technique. Basically, keep each function small and break your code into small chunks with obvious naming. This makes your code easier to read, test and debug and it beomes vastly more reusable.</p>
<p>Consider this totally made-up function:</p>
<pre class="language-swift"><code class="language-swift"><span class="token keyword">func</span> <span class="token function-definition function">configureDisplay</span><span class="token punctuation">(</span><span class="token keyword">for</span> userId<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token operator">?</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">guard</span> <span class="token keyword">let</span> userId <span class="token operator">=</span> userId <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token function">showLoginScreen</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span>
    <span class="token punctuation">}</span>

    <span class="token function">displayUserData</span><span class="token punctuation">(</span><span class="token keyword">for</span><span class="token punctuation">:</span> userId<span class="token punctuation">)</span>
    <span class="token keyword">let</span> userType <span class="token operator">=</span> <span class="token function">getPermissions</span><span class="token punctuation">(</span><span class="token keyword">for</span><span class="token punctuation">:</span> userId<span class="token punctuation">)</span>

    <span class="token function">populateMenus</span><span class="token punctuation">(</span><span class="token keyword">for</span><span class="token punctuation">:</span> userType<span class="token punctuation">)</span>
    <span class="token function">loadInitialData</span><span class="token punctuation">(</span><span class="token keyword">for</span><span class="token punctuation">:</span> userId<span class="token punctuation">)</span>

    <span class="token function">playSound</span><span class="token punctuation">(</span><span class="token punctuation">.</span>welcome<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">configureDisplay</span><span class="token punctuation">(</span><span class="token keyword">for</span><span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"abc123"</span></span><span class="token punctuation">)</span>
<span class="token function">configureDisplay</span><span class="token punctuation">(</span><span class="token keyword">for</span><span class="token punctuation">:</span> <span class="token nil constant">nil</span><span class="token punctuation">)</span></code></pre>
<p>Is it easy to read?
Can you work out what it does? Now imagine all that functionality in a single huge function - would that be as good to use?</p>
<p>As a way of encouraging shorter functions, which leads inevitably to this sort of structured code, I strongly recommend using SwiftLint to check your code. I wrote a <a href="/post/2018/swiftlint/">post about this</a> a while ago which you might find useful.</p>
<h4>Naming</h4>
<p>The other key thing to mention and it is a point that Apple makes very strongly, is to name your functions and their parameters so as to make them as readable as possible from the calling site. You write a function once, but you most likely call it multiple times, so it is the calling site that needs to be really easy to read.</p>
<p>Returning to the game example, here is a dummy function to show damage caused to a target:</p>
<pre class="language-swift"><code class="language-swift"><span class="token keyword">func</span> <span class="token function-definition function">displayDamage</span><span class="token punctuation">(</span>damage<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">,</span> target<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token function">displayDamage</span><span class="token punctuation">(</span>damage<span class="token punctuation">:</span> <span class="token number">31</span><span class="token punctuation">,</span> target<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Ogre"</span></span><span class="token punctuation">)</span></code></pre>
<p>There is nothing really wrong with the function, but calling it is a bit clunky and doesn't read well with the repeated use of the word 'damage'.</p>
<p>What about this version?</p>
<pre class="language-swift"><code class="language-swift"><span class="token keyword">func</span> <span class="token function-definition function">display</span><span class="token punctuation">(</span>damage<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">,</span> doneTo target<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token function">display</span><span class="token punctuation">(</span>damage<span class="token punctuation">:</span> <span class="token number">42</span><span class="token punctuation">,</span> doneTo<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Wolf"</span></span><span class="token punctuation">)</span></code></pre>
<p>There are no repeated words in the caller and by using two labels for the second parameter, the calling site can read almost like a sentence, but inside the function, <code>target</code> is still a more logical name.</p>
<p>A third alternative is to use an un-named parameter if the naming logic is implicit in the function name itself:</p>
<pre class="language-swift"><code class="language-swift"><span class="token keyword">func</span> <span class="token function-definition function">displayDamage</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> damage<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">,</span> doneTo target<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token function">displayDamage</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">,</span> doneTo<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Orc"</span></span><span class="token punctuation">)</span></code></pre>
<hr>
<h2>Closures</h2>
<p>As promised above, a very quick explanation of closures, which really deserve their own post...</p>
<p>In Swift, as in many languages, functions can be passed as parameters to other functions. As an example, I have set up 2 functions to perform a simple calculation on a given integer:</p>
<pre class="language-swift"><code class="language-swift"><span class="token keyword">func</span> <span class="token function-definition function">cube</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> number<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token class-name">Int</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> number <span class="token operator">*</span> number <span class="token operator">*</span> number
<span class="token punctuation">}</span>
<span class="token function">cube</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function-definition function">square</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> number<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token class-name">Int</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> number <span class="token operator">*</span> number
<span class="token punctuation">}</span>
<span class="token function">square</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span></code></pre>
<p>Now imagine that you wanted to create a more general function that could call either one of these functions with any number:</p>
<pre class="language-swift"><code class="language-swift"><span class="token keyword">func</span> <span class="token function-definition function">doCalculation</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> number<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">,</span> calculation<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token class-name">Int</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token class-name">Int</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token class-name">Int</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">calculation</span><span class="token punctuation">(</span>number<span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre>
<p><code>doCalculation</code> takes 2 parameters. The first one is easy - it is just an integer. The second one is weird! For every parameter of a function, you have to supply the type of that parameter. Usually this is quite straight-forward: Int, String, MyCustomClass etc. But what is the <code>type</code> of a function? Option-clicking on the word <code>cube</code> in my function definition, I see this:</p>
<p><img src="/images/2018/FunctionType.png" alt="Function type"></p>
<p>And ignoring the parameter labels, this basically provides the function type: Int inside parentheses for the input, then the arrow, then Int again for the return type. So the type definition for the <code>cube</code> function is <code>(Int) -&gt; Int</code>. And when I define the type for the calculation parameter in the <code>doCalculation</code> function, this is exactly what I put. The last part of the function definition is specifiying the overall return type as an Int.</p>
<p>Using the <code>cube</code> and <code>square</code> functions inside <code>doCalculation</code> works like this:</p>
<pre class="language-swift"><code class="language-swift"><span class="token function">doCalculation</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span> calculation<span class="token punctuation">:</span> square<span class="token punctuation">)</span>
<span class="token function">doCalculation</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> calculation<span class="token punctuation">:</span> cube<span class="token punctuation">)</span></code></pre>
<p>But what if I didn't want to define all the functions I might call in advance? Then I can send the function body to the <code>doCalculation</code> function instead of using a pre-built function. This way of using a function inside another function is referred to as a closure.</p>
<pre class="language-swift"><code class="language-swift"><span class="token function">doCalculation</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span> calculation<span class="token punctuation">:</span> <span class="token punctuation">{</span> number <span class="token keyword">in</span>
    <span class="token keyword">return</span> number <span class="token operator">*</span> <span class="token number">12</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
<p>The <code>doCalculation</code> function in unchanged, but instead of passing it a reference to a function, I am directly passing it the instructions it should use to get the result. As with any function, the instructions are contained within a set of curly braces. The input to this function is listed after the opening curly brace followed by the keyword <code>in</code>. Then the function body does whatever it needs to and returns the result.</p>
<p>You may have heard the term <code>trailing closure</code>. This refers to a function where the last parameter is a function. If that function is called using a closure, there is a short-hand way of writing this, omitting the closure's parameter name and moving the closing parenthesis to before the opening curly brace.</p>
<pre class="language-swift"><code class="language-swift"><span class="token function">doCalculation</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> number <span class="token keyword">in</span>
    <span class="token keyword">return</span> number <span class="token operator">%</span> <span class="token number">3</span>
<span class="token punctuation">}</span></code></pre>
<p>With the <code>filter</code>, <code>map</code> and <code>reduce</code> functions I showed above, this is the way their logic was supplied but here is how the filter example would look without using a closure:</p>
<pre class="language-swift"><code class="language-swift"><span class="token keyword">func</span> <span class="token function-definition function">checkName</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> name<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token class-name">Bool</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> name<span class="token punctuation">.</span>count <span class="token operator">></span> <span class="token number">3</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>name<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">" "</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function-definition function">checkPlayerNamesUsingFunction</span><span class="token punctuation">(</span>names<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token punctuation">[</span><span class="token class-name">String</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> validNames <span class="token operator">=</span> names<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>checkName<span class="token punctuation">)</span>
    <span class="token keyword">return</span> validNames
<span class="token punctuation">}</span>

<span class="token keyword">let</span> allNames <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token string-literal"><span class="token string">"Woody"</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"Rex"</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"Slinky"</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"Buzz Lightyear"</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"Hamm"</span></span> <span class="token punctuation">]</span>
<span class="token keyword">let</span> checkedNames <span class="token operator">=</span> <span class="token function">checkPlayerNamesUsingFunction</span><span class="token punctuation">(</span>names<span class="token punctuation">:</span> allNames<span class="token punctuation">)</span></code></pre>
<p>Which methods you use are up to you - they all work. If you have a function that will be called in many different places, maybe it makes more sense to define it once and pass around a reference to that function. If not, a closure has the advantage that it keeps everything together. There is more to closures, particularly to do with variable scope, but I think this post has gone on long enough already.... maybe next time.</p>

        </article>
    </section>

    </main>
    <footer>
        <div class="footer-content">
  <nav>
    <ul class="footer-links">
      
        <li>
          <a href="mailto:info@troz.net">
            <img src="/images/links/envelope.svg" alt="Email" title="Email" height="30px" >
          </a>
        </li>
      
        <li>
          <a href="https://mastodon.social/@troz" rel="noreferrer nofollow noopener external" target="_blank">
            <img src="/images/links/mastodon.png" alt="Mastodon" title="Mastodon" height="30px" >
          </a>
        </li>
      
        <li>
          <a href="https://linktr.ee/trozware" rel="noreferrer nofollow noopener external" target="_blank">
            <img src="/images/links/tree.svg" alt="Linktree" title="Linktree" height="30px" >
          </a>
        </li>
      
        <li>
          <a href="https://github.com/trozware" rel="noreferrer nofollow noopener external" target="_blank">
            <img src="/images/links/github.svg" alt="GitHub" title="GitHub" height="30px" >
          </a>
        </li>
      
        <li>
          <a href="https://stackoverflow.com/users/1082632" rel="noreferrer nofollow noopener external" target="_blank">
            <img src="/images/links/stack-overflow.svg" alt="Stack Overflow" title="Stack Overflow" height="30px" >
          </a>
        </li>
      
        <li>
          <a href="https://dev.to/trozware" rel="noreferrer nofollow noopener external" target="_blank">
            <img src="/images/links/dev-badge.svg" alt="Dev To" title="Dev To" height="30px" >
          </a>
        </li>
      
        <li>
          <a href="/index.xml">
            <img src="/images/links/rss.svg" alt="RSS Feed" title="RSS Feed" height="30px" >
          </a>
        </li>
      
        <li>
          <a href="/atom.xml">
            <img src="/images/links/atom.svg" alt="Atom Feed" title="Atom Feed" height="30px" >
          </a>
        </li>
      
        <li>
          <a href="/feed.json">
            <img src="/images/links/json.png" alt="JSON Feed" title="JSON Feed" height="30px" >
          </a>
        </li>
      
        <li>
          <a href="https://ko-fi.com/trozware" rel="noreferrer nofollow noopener external" target="_blank">
            <img src="/images/links/kofi1.png.webp" alt="Buy Me a Coffee" title="Buy Me a Coffee" height="30px" >
          </a>
        </li>
      
    </ul>
  </nav>
</div>

        <div class="copyright">
            <p>Copyright &copy; 2025 Sarah Reichelt, TrozWare</p>
        </div>
    </footer>

    <script>
        window.addEventListener('DOMContentLoaded', (event) => {
            let searchElement = document.getElementById('search');
            if (searchElement) {
                new PagefindUI({ element: searchElement, showSubResults: true });
            }
        });
    </script>
    <script src="/js/theme_switcher.js"></script>
    <script src="/js/clipboard.js"></script>
    <script src="/js/menu.js"></script>
</body>
</html>
